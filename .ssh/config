Host *
    # Use version 2 of the SSH protocol
    Protocol 2

    # Create a master session per host for every host you SSH into.
    # Any subsequent connection to this host will use it instead of creating a new one.
    # Huge speed improvement when obtaining a connection handshake.
    ControlMaster auto
    ControlPath ~/.ssh/sockets/%r@%h:%p
    ControlPersist 3600

    # Fix the issue where macOS Sierra constantly prompts for password when trying
    # to establish new connection.
    AddKeysToAgent yes
    UseKeychain yes

    # Turn on the compression
    Compression yes

    # Send an empty TCP ACK packet to keep connection alive
    TCPKeepAlive yes

    # Send a null packet to the other side every n seconds
    # and give up if it does not receive any response after certain amount of tries
    ServerAliveInterval 60 # seconds
    ServerAliveCountMax 3  # tries
